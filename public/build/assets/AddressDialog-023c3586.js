import{u as A,a as m,b as S,d as q,_ as D,f as h,o as d,v as V,w as g,i as o,h as u,y as f,K as c,g as a,k as r,t as l,F as n,bY as _,p as F,l as N,j as P}from"./app-228ad898.js";const B={props:{show:{type:Boolean,required:!0,default:!1},oldAddress:{type:Object,default:()=>{}}},data:()=>({adding:!1,countriesLoaded:!1,countries:[],filteredStates:[],filteredCities:[],v$:A(),form:{id:null,full_name:"",email_address:"",address:"",postal_code:"",country:"",state:"",city:"",phone:""}}),validations:{form:{full_name:{required:m},email_address:{required:m},address:{required:m},postal_code:{required:m},country:{required:m},state:{required:m},city:{required:m},phone:{required:m}}},watch:{oldAddress(s,t){s&&!this.is_empty_obj(s)?this.processOldAddress(s):this.resetData()}},computed:{statePlaceholer(){return this.$i18n.t("select_a_state")},cityPlaceholer(){return this.$i18n.t("select_a_city")},isVisible:{get:function(){return this.show},set:function(s){}}},created(){this.fetchCountries()},methods:{...S("address",["addAddress"]),...q("address",["setAddresses"]),async fetchCountries(){if(!this.countriesLoaded){const s=await this.call_api("get","all-countries");s.data.success&&(this.countriesLoaded=!0,this.countries=s.data.data)}},async countryChanged(s){const t=await this.call_api("get",`states/${this.form.country}`);t.data.success?(this.filteredStates=t.data.data,this.form.state="",this.form.city="",this.filteredCities=[]):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"})},async stateChanged(s){const t=await this.call_api("get",`cities/${this.form.state}`);t.data.success?(this.filteredCities=t.data.data,this.form.city=""):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"})},async addNewAddress(){if(!await this.v$.$validate())return;this.adding=!0;const t=await this.call_api("post","address/create",this.form);t.data.success?(this.addAddress(t.data.data),this.snack({message:t.data.message}),this.resetData(),this.closeDialog()):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"}),this.adding=!1},async updateAddress(){if(!await this.v$.$validate())return;this.adding=!0;const t=await this.call_api("post","address/update",this.form);t.data.success?(this.setAddresses(t.data.data),this.snack({message:t.data.message}),this.closeDialog()):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"}),this.adding=!1},resetData(){this.form.id=null,this.full_name="",this.email_address="",this.form.address="",this.form.postal_code="",this.form.country="",this.form.state="",this.form.city="",this.form.phone="",this.v$.form.$reset()},async processOldAddress(s){let t={...s};this.form.id=t.id,this.full_name=t.full_name,this.email_address=t.email_address,this.form.address=t.address,this.form.postal_code=t.postal_code,this.form.phone=t.phone;let p=this.countries.find(i=>i.name===t.country);this.form.country=p.id,await this.countryChanged(p.id);let $=this.filteredStates.find(i=>i.name===t.state);this.form.state=$.id,await this.stateChanged($.id);let b=this.filteredCities.find(i=>i.name===t.city);this.form.city=b.id},closeDialog(){this.isVisible=!1,this.$emit("close")}}},j={class:"white pa-5 rounded"},L={class:"row"},M={class:"col-md-4"},O={class:"form-group"},z=["placeholder"],T={class:"col-md-4"},E={class:"form-group"},K=["placeholder"],Y={class:"col-md-4"},G={class:"form-group"},H=["placeholder"],I={class:"col-md-4"},J={class:"form-group"},Q=["label"],R={class:"col-md-4"},W={class:"form-group"},X=["placeholder"],Z=["value"],x={class:"col-md-4"},ee={class:"form-group"},se=["placeholder"],te=["value"],oe={class:"col-md-4"},de={class:"form-group"},ae=["placeholder"],le=["value"],ie={class:"col-md-4"},re={class:"form-group"},ne=["placeholder"],ue={class:"mb-3"},me={class:"mb-1 fs-13 fw-500"},fe={class:"mb-3"},he={class:"mb-1 fs-13 fw-500"},ce={class:"mb-3"},pe={class:"mb-1 fs-13 fw-500"},ve={class:"mb-3"},$e={class:"mb-1 fs-13 fw-500"},ye={class:"mb-3"},ge={class:"mb-1 fs-13 fw-500"},_e={class:"mb-3"},be={class:"mb-1 fs-13 fw-500"},Ve={class:"mb-3"},Ce={class:"mb-3"},we={class:"mb-1 fs-13 fw-500"},ke={class:"text-right mt-4"};function Ue(s,t,p,$,b,i){const v=h("v-text-field"),C=h("v-textarea"),y=h("v-autocomplete"),w=h("v-btn"),k=h("v-form"),U=h("v-dialog");return d(),V(U,{modelValue:i.isVisible,"onUpdate:modelValue":t[20]||(t[20]=e=>i.isVisible=e),"max-width":"600px","onClick:outside":i.closeDialog},{default:g(()=>[o("div",j,[u(k,{onSubmit:t[19]||(t[19]=P(e=>i.addNewAddress(),["prevent"])),autocomplete:"chrome-off"},{default:g(()=>[o("div",L,[o("div",M,[o("div",O,[f(o("input",{placeholder:s.$t("email_address"),type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>s.form.email_address=e),"hide-details":"auto",required:"",class:"form-control"},null,8,z),[[c,s.form.email_address]]),(d(!0),a(n,null,r(s.v$.form.email_address.$errors,e=>(d(),a("p",{key:e.$uid,class:"text-red"},l(e.$message),1))),128))])]),o("div",T,[o("div",E,[f(o("input",{placeholder:s.$t("full_name"),type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.form.full_name=e),"hide-details":"auto",required:"",class:"form-control"},null,8,K),[[c,s.form.full_name]]),(d(!0),a(n,null,r(s.v$.form.full_name.$errors,e=>(d(),a("p",{key:e.$uid,class:"text-red"},l(e.$message),1))),128))])]),o("div",Y,[o("div",G,[f(o("input",{placeholder:s.$t("phone_number"),type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>s.form.phone=e),"hide-details":"auto",required:"",class:"form-control"},null,8,H),[[c,s.form.phone]]),(d(!0),a(n,null,r(s.v$.form.phone.$errors,e=>(d(),a("p",{key:e.$uid,class:"text-red"},l(e.$message),1))),128))])]),o("div",I,[o("div",J,[f(o("textarea",{label:s.$t("address"),"onUpdate:modelValue":t[3]||(t[3]=e=>s.form.address=e),"hide-details":"auto",rows:"3",required:"","no-resize":"",class:"form-control"},null,8,Q),[[c,s.form.address]]),(d(!0),a(n,null,r(s.v$.form.address.$errors,e=>(d(),a("p",{key:e.$uid,class:"text-red"},l(e.$message),1))),128))])]),o("div",R,[o("div",W,[f(o("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.form.country=e),class:"form-control",placeholder:s.$t("select_country"),onChange:t[5]||(t[5]=(...e)=>i.countryChanged&&i.countryChanged(...e))},[t[21]||(t[21]=o("option",{value:"",disabled:""},"Select a Country",-1)),(d(!0),a(n,null,r(s.countries,e=>(d(),a("option",{key:e.id,value:e.id},l(e.name),9,Z))),128))],40,X),[[_,s.form.country]]),(d(!0),a(n,null,r(s.v$.form.country.$errors,e=>(d(),a("p",{key:e.$uid,class:"text-red"},l(e.$message),1))),128))])]),o("div",x,[o("div",ee,[f(o("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>s.form.state=e),class:"form-control",placeholder:i.statePlaceholer,onChange:t[7]||(t[7]=(...e)=>i.stateChanged&&i.stateChanged(...e))},[t[22]||(t[22]=o("option",{value:"",disabled:""},"Select a State",-1)),(d(!0),a(n,null,r(s.filteredStates,e=>(d(),a("option",{key:e.id,value:e.id},l(e.name),9,te))),128))],40,se),[[_,s.form.state]]),(d(!0),a(n,null,r(s.v$.form.state.$errors,e=>(d(),a("p",{key:e.$uid,class:"text-red"},l(e.$message),1))),128))])]),o("div",oe,[o("div",de,[f(o("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>s.form.city=e),class:"form-control",placeholder:i.cityPlaceholer,onChange:t[9]||(t[9]=(...e)=>s.handleCityChange&&s.handleCityChange(...e))},[t[23]||(t[23]=o("option",{value:"",disabled:""},"Select a City",-1)),(d(!0),a(n,null,r(s.filteredCities,e=>(d(),a("option",{key:e.id,value:e.id},l(e.name),9,le))),128))],40,ae),[[_,s.form.city]]),(d(!0),a(n,null,r(s.v$.form.city.$errors,e=>(d(),a("p",{key:e.$uid,class:"text-red"},l(e.$message),1))),128))])]),o("div",ie,[o("div",re,[f(o("input",{placeholder:s.$t("postal_code"),type:"text","onUpdate:modelValue":t[10]||(t[10]=e=>s.form.postal_code=e),"hide-details":"auto",required:"",class:"form-control"},null,8,ne),[[c,s.form.postal_code]]),(d(!0),a(n,null,r(s.v$.form.postal_code.$errors,e=>(d(),a("p",{key:e.$uid,class:"text-red"},l(e.$message),1))),128))])])]),o("div",ue,[o("div",me,l(s.$t("full_name")),1),u(v,{placeholder:s.$t("full_name"),type:"text",modelValue:s.form.full_name,"onUpdate:modelValue":t[11]||(t[11]=e=>s.form.full_name=e),"hide-details":"auto",required:"",variant:"outlined"},null,8,["placeholder","modelValue"]),(d(!0),a(n,null,r(s.v$.form.full_name.$errors,e=>(d(),a("p",{key:e.$uid,class:"text-red"},l(e.$message),1))),128))]),o("div",fe,[o("div",he,l(s.$t("email_address")),1),u(v,{placeholder:s.$t("email_address"),type:"email",modelValue:s.form.email_address,"onUpdate:modelValue":t[12]||(t[12]=e=>s.form.email_address=e),"hide-details":"auto",required:"",variant:"outlined"},null,8,["placeholder","modelValue"]),(d(!0),a(n,null,r(s.v$.form.email_address.$errors,e=>(d(),a("p",{key:e.$uid,class:"text-red"},l(e.$message),1))),128))]),o("div",ce,[o("div",pe,l(s.$t("address")),1),u(C,{label:s.$t("address"),modelValue:s.form.address,"onUpdate:modelValue":t[13]||(t[13]=e=>s.form.address=e),"hide-details":"auto",rows:"3",required:"",variant:"outlined","no-resize":""},null,8,["label","modelValue"]),(d(!0),a(n,null,r(s.v$.form.address.$errors,e=>(d(),a("p",{key:e.$uid,class:"text-red"},l(e.$message),1))),128))]),o("div",ve,[o("div",$e,l(s.$t("postal_code")),1),u(v,{placeholder:s.$t("postal_code"),type:"text",modelValue:s.form.postal_code,"onUpdate:modelValue":t[14]||(t[14]=e=>s.form.postal_code=e),"hide-details":"auto",required:"",variant:"outlined"},null,8,["placeholder","modelValue"]),(d(!0),a(n,null,r(s.v$.form.postal_code.$errors,e=>(d(),a("p",{key:e.$uid,class:"text-red"},l(e.$message),1))),128))]),o("div",ye,[o("div",ge,l(s.$t("country")),1),u(y,{modelValue:s.form.country,"onUpdate:modelValue":[t[15]||(t[15]=e=>s.form.country=e),i.countryChanged],items:s.countries,label:s.$t("select_country"),"hide-details":"auto",variant:"outlined","item-title":"name","item-value":"id",dense:"",autocomplete:"off","custom-filter":i.countryChanged},null,8,["modelValue","items","label","custom-filter","onUpdate:modelValue"]),(d(!0),a(n,null,r(s.v$.form.country.$errors,e=>(d(),a("p",{key:e.$uid,class:"text-red"},l(e.$message),1))),128))]),o("div",_e,[o("div",be,l(s.$t("state")),1),u(y,{modelValue:s.form.state,"onUpdate:modelValue":[t[16]||(t[16]=e=>s.form.state=e),i.stateChanged],items:s.filteredStates,"hide-details":"auto",label:i.statePlaceholer,variant:"outlined","item-title":"name","item-value":"id",dense:""},null,8,["modelValue","items","label","onUpdate:modelValue"]),(d(!0),a(n,null,r(s.v$.form.state.$errors,e=>(d(),a("p",{key:e.$uid,class:"text-red"},l(e.$message),1))),128))]),o("div",Ve,[t[24]||(t[24]=o("div",{class:"mb-1 fs-13 fw-500"},"City",-1)),u(y,{modelValue:s.form.city,"onUpdate:modelValue":t[17]||(t[17]=e=>s.form.city=e),items:s.filteredCities,label:i.cityPlaceholer,"hide-details":"auto",variant:"outlined","item-title":"name","item-value":"id",dense:""},null,8,["modelValue","items","label"]),(d(!0),a(n,null,r(s.v$.form.city.$errors,e=>(d(),a("p",{key:e.$uid,class:"text-red"},l(e.$message),1))),128))]),o("div",Ce,[o("div",we,l(s.$t("phone_number")),1),u(v,{placeholder:s.$t("phone_number"),type:"number",modelValue:s.form.phone,"onUpdate:modelValue":t[18]||(t[18]=e=>s.form.phone=e),"hide-details":"auto",required:"",variant:"outlined"},null,8,["placeholder","modelValue"]),(d(!0),a(n,null,r(s.v$.form.phone.$errors,e=>(d(),a("p",{key:e.$uid,class:"text-red"},l(e.$message),1))),128))]),o("div",ke,[s.is_empty_obj(p.oldAddress)?N("",!0):(d(),V(w,{key:0,elevation:"0",type:"submit",color:"primary",onClick:i.updateAddress,loading:s.adding,disabled:s.adding},{default:g(()=>[F(l(s.$t("update")),1)]),_:1},8,["onClick","loading","disabled"]))])]),_:1})])]),_:1},8,["modelValue","onClick:outside"])}const Se=D(B,[["render",Ue]]);export{Se as A};
