import{u as U,a as u,b as q,d as D,_ as S,f as h,o as a,v as b,w as p,i as d,h as m,y as f,K as c,g as o,k as r,t as l,F as n,p as V,j as N}from"./app-4f7dc11f.js";const F={props:{show:{type:Boolean,required:!0,default:!1},oldAddress:{type:Object,default:()=>{}}},data:()=>({adding:!1,countriesLoaded:!1,countries:[],filteredStates:[],filteredCities:[],v$:U(),form:{id:null,full_name:"",email_address:"",address:"",postal_code:"",country:"",state:"",city:"",phone:""}}),validations:{form:{full_name:{required:u},email_address:{required:u},address:{required:u},postal_code:{required:u},country:{required:u},state:{required:u},city:{required:u},phone:{required:u}}},watch:{oldAddress(e,t){e&&!this.is_empty_obj(e)?this.processOldAddress(e):this.resetData()}},computed:{statePlaceholer(){return this.$i18n.t("select_a_state")},cityPlaceholer(){return this.$i18n.t("select_a_city")},isVisible:{get:function(){return this.show},set:function(e){}}},created(){this.fetchCountries()},methods:{...q("address",["addAddress"]),...D("address",["setAddresses"]),async fetchCountries(){if(!this.countriesLoaded){const e=await this.call_api("get","all-countries");e.data.success&&(this.countriesLoaded=!0,this.countries=e.data.data)}},async countryChanged(e){const t=await this.call_api("get",`states/${this.form.country}`);t.data.success?(this.filteredStates=t.data.data,this.form.state="",this.form.city="",this.filteredCities=[]):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"})},async stateChanged(e){const t=await this.call_api("get",`cities/${this.form.state}`);t.data.success?(this.filteredCities=t.data.data,this.form.city=""):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"})},async addNewAddress(){if(!await this.v$.$validate())return;this.adding=!0;const t=await this.call_api("post","address/create",this.form);t.data.success?(this.addAddress(t.data.data),this.snack({message:t.data.message}),this.resetData(),this.closeDialog()):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"}),this.adding=!1},async updateAddress(){if(!await this.v$.$validate())return;this.adding=!0;const t=await this.call_api("post","address/update",this.form);t.data.success?(this.setAddresses(t.data.data),this.snack({message:t.data.message}),this.closeDialog()):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"}),this.adding=!1},resetData(){this.form.id=null,this.full_name="",this.email_address="",this.form.address="",this.form.postal_code="",this.form.country="",this.form.state="",this.form.city="",this.form.phone="",this.v$.form.$reset()},async processOldAddress(e){let t={...e};this.form.id=t.id,this.full_name=t.full_name,this.email_address=t.email_address,this.form.address=t.address,this.form.postal_code=t.postal_code,this.form.phone=t.phone;let v=this.countries.find(i=>i.name===t.country);this.form.country=v.id,await this.countryChanged(v.id);let y=this.filteredStates.find(i=>i.name===t.state);this.form.state=y.id,await this.stateChanged(y.id);let w=this.filteredCities.find(i=>i.name===t.city);this.form.city=w.id},closeDialog(){this.isVisible=!1,this.$emit("close")}}},P={class:"white pa-5 rounded"},B={class:"row"},j={class:"col-md-4"},L={class:"form-group"},M={class:"col-md-4"},O={class:"form-group"},E={class:"col-md-4"},T={class:"form-group"},z={class:"col-md-4"},K={class:"form-group"},G={class:"col-md-4"},H={class:"form-group"},I={class:"col-md-4"},J={class:"form-group"},Q={class:"col-md-4"},R={class:"form-group"},W={class:"col-md-4"},X={class:"form-group"},Y={class:"mb-3"},Z={class:"mb-1 fs-13 fw-500"},x={class:"mb-3"},ee={class:"mb-1 fs-13 fw-500"},se={class:"mb-3"},te={class:"mb-1 fs-13 fw-500"},de={class:"mb-3"},ae={class:"mb-1 fs-13 fw-500"},oe={class:"mb-3"},le={class:"mb-1 fs-13 fw-500"},ie={class:"mb-3"},re={class:"mb-1 fs-13 fw-500"},ne={class:"mb-3"},me={class:"mb-3"},ue={class:"mb-1 fs-13 fw-500"},fe={class:"text-right mt-4"};function ce(e,t,v,y,w,i){const $=h("v-text-field"),k=h("v-textarea"),g=h("v-autocomplete"),_=h("v-btn"),C=h("v-form"),A=h("v-dialog");return a(),b(A,{modelValue:i.isVisible,"onUpdate:modelValue":t[17]||(t[17]=s=>i.isVisible=s),"max-width":"600px","onClick:outside":i.closeDialog},{default:p(()=>[d("div",P,[m(C,{onSubmit:t[16]||(t[16]=N(s=>i.addNewAddress(),["prevent"])),autocomplete:"chrome-off"},{default:p(()=>[d("div",B,[d("div",j,[d("div",L,[f(d("input",{placeholder:"Email Address*","onUpdate:modelValue":t[0]||(t[0]=s=>e.form.email_address=s),"hide-details":"auto",required:"",class:"form-control",name:"email_address",id:"email_address"},null,512),[[c,e.form.email_address]]),(a(!0),o(n,null,r(e.v$.form.email_address.$errors,s=>(a(),o("p",{key:s.$uid,class:"text-red"},l(s.$message),1))),128))])]),d("div",M,[d("div",O,[f(d("input",{placeholder:"Full Name*","onUpdate:modelValue":t[1]||(t[1]=s=>e.form.full_name=s),"hide-details":"auto",required:"",class:"form-control",name:"full_name",id:"full_name"},null,512),[[c,e.form.full_name]]),(a(!0),o(n,null,r(e.v$.form.full_name.$errors,s=>(a(),o("p",{key:s.$uid,class:"text-red"},l(s.$message),1))),128))])]),d("div",E,[d("div",T,[f(d("input",{placeholder:"Phone Number*","onUpdate:modelValue":t[2]||(t[2]=s=>e.form.phone=s),"hide-details":"auto",required:"",class:"form-control",name:"phone",id:"phone"},null,512),[[c,e.form.phone]]),(a(!0),o(n,null,r(e.v$.form.phone.$errors,s=>(a(),o("p",{key:s.$uid,class:"text-red"},l(s.$message),1))),128))])]),d("div",z,[d("div",K,[f(d("input",{placeholder:"Street Address*","onUpdate:modelValue":t[3]||(t[3]=s=>e.form.address=s),"hide-details":"auto",required:"",class:"form-control",name:"address",id:"address"},null,512),[[c,e.form.address]]),(a(!0),o(n,null,r(e.v$.form.email_address.$errors,s=>(a(),o("p",{key:s.$uid,class:"text-red"},l(s.$message),1))),128))])]),d("div",G,[d("div",H,[f(d("input",{placeholder:"Country*","onUpdate:modelValue":t[4]||(t[4]=s=>e.form.country=s),"hide-details":"auto",required:"",class:"form-control",name:"country",id:"country"},null,512),[[c,e.form.country]]),(a(!0),o(n,null,r(e.v$.form.country.$errors,s=>(a(),o("p",{key:s.$uid,class:"text-red"},l(s.$message),1))),128))])]),d("div",I,[d("div",J,[f(d("input",{placeholder:"State*","onUpdate:modelValue":t[5]||(t[5]=s=>e.form.state=s),"hide-details":"auto",required:"",class:"form-control",name:"state",id:"state"},null,512),[[c,e.form.state]]),(a(!0),o(n,null,r(e.v$.form.state.$errors,s=>(a(),o("p",{key:s.$uid,class:"text-red"},l(s.$message),1))),128))])]),d("div",Q,[d("div",R,[f(d("input",{placeholder:"City*","onUpdate:modelValue":t[6]||(t[6]=s=>e.form.city=s),"hide-details":"auto",required:"",class:"form-control",name:"city",id:"city"},null,512),[[c,e.form.city]]),(a(!0),o(n,null,r(e.v$.form.city.$errors,s=>(a(),o("p",{key:s.$uid,class:"text-red"},l(s.$message),1))),128))])]),d("div",W,[d("div",X,[f(d("input",{placeholder:"Postal Code*","onUpdate:modelValue":t[7]||(t[7]=s=>e.form.postal_code=s),"hide-details":"auto",required:"",class:"form-control",name:"postal_code",id:"postal_code"},null,512),[[c,e.form.postal_code]]),(a(!0),o(n,null,r(e.v$.form.postal_code.$errors,s=>(a(),o("p",{key:s.$uid,class:"text-red"},l(s.$message),1))),128))])])]),d("div",Y,[d("div",Z,l(e.$t("full_name")),1),m($,{placeholder:e.$t("full_name"),type:"text",modelValue:e.form.full_name,"onUpdate:modelValue":t[8]||(t[8]=s=>e.form.full_name=s),"hide-details":"auto",required:"",variant:"outlined"},null,8,["placeholder","modelValue"]),(a(!0),o(n,null,r(e.v$.form.full_name.$errors,s=>(a(),o("p",{key:s.$uid,class:"text-red"},l(s.$message),1))),128))]),d("div",x,[d("div",ee,l(e.$t("email_address")),1),m($,{placeholder:e.$t("email_address"),type:"email",modelValue:e.form.email_address,"onUpdate:modelValue":t[9]||(t[9]=s=>e.form.email_address=s),"hide-details":"auto",required:"",variant:"outlined"},null,8,["placeholder","modelValue"]),(a(!0),o(n,null,r(e.v$.form.email_address.$errors,s=>(a(),o("p",{key:s.$uid,class:"text-red"},l(s.$message),1))),128))]),d("div",se,[d("div",te,l(e.$t("address")),1),m(k,{label:e.$t("address"),modelValue:e.form.address,"onUpdate:modelValue":t[10]||(t[10]=s=>e.form.address=s),"hide-details":"auto",rows:"3",required:"",variant:"outlined","no-resize":""},null,8,["label","modelValue"]),(a(!0),o(n,null,r(e.v$.form.address.$errors,s=>(a(),o("p",{key:s.$uid,class:"text-red"},l(s.$message),1))),128))]),d("div",de,[d("div",ae,l(e.$t("postal_code")),1),m($,{placeholder:e.$t("postal_code"),type:"text",modelValue:e.form.postal_code,"onUpdate:modelValue":t[11]||(t[11]=s=>e.form.postal_code=s),"hide-details":"auto",required:"",variant:"outlined"},null,8,["placeholder","modelValue"]),(a(!0),o(n,null,r(e.v$.form.postal_code.$errors,s=>(a(),o("p",{key:s.$uid,class:"text-red"},l(s.$message),1))),128))]),d("div",oe,[d("div",le,l(e.$t("country")),1),m(g,{modelValue:e.form.country,"onUpdate:modelValue":[t[12]||(t[12]=s=>e.form.country=s),i.countryChanged],items:e.countries,label:e.$t("select_country"),"hide-details":"auto",variant:"outlined","item-title":"name","item-value":"id",dense:"",autocomplete:"off","custom-filter":i.countryChanged},null,8,["modelValue","items","label","custom-filter","onUpdate:modelValue"]),(a(!0),o(n,null,r(e.v$.form.country.$errors,s=>(a(),o("p",{key:s.$uid,class:"text-red"},l(s.$message),1))),128))]),d("div",ie,[d("div",re,l(e.$t("state")),1),m(g,{modelValue:e.form.state,"onUpdate:modelValue":[t[13]||(t[13]=s=>e.form.state=s),i.stateChanged],items:e.filteredStates,"hide-details":"auto",label:i.statePlaceholer,variant:"outlined","item-title":"name","item-value":"id",dense:""},null,8,["modelValue","items","label","onUpdate:modelValue"]),(a(!0),o(n,null,r(e.v$.form.state.$errors,s=>(a(),o("p",{key:s.$uid,class:"text-red"},l(s.$message),1))),128))]),d("div",ne,[t[18]||(t[18]=d("div",{class:"mb-1 fs-13 fw-500"},"City",-1)),m(g,{modelValue:e.form.city,"onUpdate:modelValue":t[14]||(t[14]=s=>e.form.city=s),items:e.filteredCities,label:i.cityPlaceholer,"hide-details":"auto",variant:"outlined","item-title":"name","item-value":"id",dense:""},null,8,["modelValue","items","label"]),(a(!0),o(n,null,r(e.v$.form.city.$errors,s=>(a(),o("p",{key:s.$uid,class:"text-red"},l(s.$message),1))),128))]),d("div",me,[d("div",ue,l(e.$t("phone_number")),1),m($,{placeholder:e.$t("phone_number"),type:"number",modelValue:e.form.phone,"onUpdate:modelValue":t[15]||(t[15]=s=>e.form.phone=s),"hide-details":"auto",required:"",variant:"outlined"},null,8,["placeholder","modelValue"]),(a(!0),o(n,null,r(e.v$.form.phone.$errors,s=>(a(),o("p",{key:s.$uid,class:"text-red"},l(s.$message),1))),128))]),d("div",fe,[m(_,{text:"",onClick:i.closeDialog,elevation:"0",class:"mr-2"},{default:p(()=>[V(l(e.$t("cancel")),1)]),_:1},8,["onClick"]),e.is_empty_obj(v.oldAddress)?(a(),b(_,{key:1,elevation:"0",type:"submit",color:"primary",onClick:i.addNewAddress,loading:e.adding,disabled:e.adding},{default:p(()=>[V(l(e.$t("add_new")),1)]),_:1},8,["onClick","loading","disabled"])):(a(),b(_,{key:0,elevation:"0",type:"submit",color:"primary",onClick:i.updateAddress,loading:e.adding,disabled:e.adding},{default:p(()=>[V(l(e.$t("update")),1)]),_:1},8,["onClick","loading","disabled"]))])]),_:1})])]),_:1},8,["modelValue","onClick:outside"])}const pe=S(F,[["render",ce]]);export{pe as A};
