import{u as w,a as u,b,d as A,_ as V,f as v,o,g as a,h as S,w as p,i as d,y as m,K as c,F as r,k as n,t as l,bY as g,v as $,p as C,j as D}from"./app-006add95.js";const U={props:{show:{type:Boolean,required:!0,default:!1},oldAddress:{type:Object,default:()=>{}}},data:()=>({adding:!1,countriesLoaded:!1,countries:[],filteredStates:[],filteredCities:[],v$:w(),form:{id:null,full_name:"",email_address:"",address:"",postal_code:"",country:"",state:"",city:"",phone:""}}),validations:{form:{full_name:{required:u},email_address:{required:u},address:{required:u},postal_code:{required:u},country:{required:u},state:{required:u},city:{required:u},phone:{required:u}}},watch:{oldAddress(s,t){s&&!this.is_empty_obj(s)?this.processOldAddress(s):this.resetData()}},computed:{statePlaceholer(){return this.$i18n.t("select_a_state")},cityPlaceholer(){return this.$i18n.t("select_a_city")},isVisible:{get:function(){return this.show},set:function(s){}}},created(){this.fetchCountries()},methods:{...b("address",["addAddress"]),...A("address",["setAddresses"]),async fetchCountries(){if(!this.countriesLoaded){const s=await this.call_api("get","all-countries");s.data.success&&(this.countriesLoaded=!0,this.countries=s.data.data)}},async countryChanged(s){const t=await this.call_api("get",`states/${this.form.country}`);t.data.success?(this.filteredStates=t.data.data,this.form.state="",this.form.city="",this.filteredCities=[]):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"})},async stateChanged(s){const t=await this.call_api("get",`cities/${this.form.state}`);t.data.success?(this.filteredCities=t.data.data,this.form.city=""):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"})},async addNewAddress(){if(!await this.v$.$validate())return;this.adding=!0;const t=await this.call_api("post","address/create",this.form);t.data.success?(this.addAddress(t.data.data),this.snack({message:t.data.message}),this.resetData(),this.closeDialog()):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"}),this.adding=!1},async updateAddress(){if(!await this.v$.$validate())return;this.adding=!0;const t=await this.call_api("post","address/update",this.form);t.data.success?(this.setAddresses(t.data.data),this.snack({message:t.data.message}),this.closeDialog()):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"}),this.adding=!1},resetData(){this.form.id=null,this.full_name="",this.email_address="",this.form.address="",this.form.postal_code="",this.form.country="",this.form.state="",this.form.city="",this.form.phone="",this.v$.form.$reset()},async processOldAddress(s){let t={...s};this.form.id=t.id,this.full_name=t.full_name,this.email_address=t.email_address,this.form.address=t.address,this.form.postal_code=t.postal_code,this.form.phone=t.phone;let h=this.countries.find(i=>i.name===t.country);this.form.country=h.id,await this.countryChanged(h.id);let f=this.filteredStates.find(i=>i.name===t.state);this.form.state=f.id,await this.stateChanged(f.id);let y=this.filteredCities.find(i=>i.name===t.city);this.form.city=y.id},closeDialog(){this.isVisible=!1,this.$emit("close")}}},q={class:"white pa-5 rounded"},F={class:"row"},N={class:"col-md-4"},B={class:"form-group"},j=["placeholder"],L={class:"col-md-4"},M={class:"form-group"},P=["placeholder"],O={class:"col-md-4"},T={class:"form-group"},E=["placeholder"],K={class:"col-md-4"},Y={class:"form-group"},z=["label","placeholder"],G={class:"col-md-4"},H={class:"form-group"},I=["placeholder"],J=["value"],Q={class:"col-md-4"},R={class:"form-group"},W=["placeholder"],X=["value"],Z={class:"col-md-4"},x={class:"form-group"},ee=["placeholder"],se=["value"],te={class:"col-md-4"},de={class:"form-group"},oe=["placeholder"],ae={class:"text-right mt-4"};function ie(s,t,h,f,y,i){const _=v("v-btn"),k=v("v-form");return o(),a("div",q,[S(k,{modelValue:i.isVisible,"onUpdate:modelValue":t[11]||(t[11]=e=>i.isVisible=e),onSubmit:t[12]||(t[12]=D(e=>i.addNewAddress(),["prevent"])),autocomplete:"chrome-off","onClick:outside":i.closeDialog},{default:p(()=>[d("div",F,[d("div",N,[d("div",B,[m(d("input",{placeholder:s.$t("email_address"),type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>s.form.email_address=e),"hide-details":"auto",required:"",class:"form-control"},null,8,j),[[c,s.form.email_address]]),(o(!0),a(r,null,n(s.v$.form.email_address.$errors,e=>(o(),a("p",{key:e.$uid,class:"text-red"},l(e.$message),1))),128))])]),d("div",L,[d("div",M,[m(d("input",{placeholder:s.$t("full_name"),type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.form.full_name=e),"hide-details":"auto",required:"",class:"form-control"},null,8,P),[[c,s.form.full_name]]),(o(!0),a(r,null,n(s.v$.form.full_name.$errors,e=>(o(),a("p",{key:e.$uid,class:"text-red"},l(e.$message),1))),128))])]),d("div",O,[d("div",T,[m(d("input",{placeholder:s.$t("phone_number"),type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>s.form.phone=e),"hide-details":"auto",required:"",class:"form-control"},null,8,E),[[c,s.form.phone]]),(o(!0),a(r,null,n(s.v$.form.phone.$errors,e=>(o(),a("p",{key:e.$uid,class:"text-red"},l(e.$message),1))),128))])]),d("div",K,[d("div",Y,[m(d("input",{label:s.$t("address"),placeholder:s.$t("Street Address"),"onUpdate:modelValue":t[3]||(t[3]=e=>s.form.address=e),"hide-details":"auto",type:"text",required:"",class:"form-control"},null,8,z),[[c,s.form.address]]),(o(!0),a(r,null,n(s.v$.form.address.$errors,e=>(o(),a("p",{key:e.$uid,class:"text-red"},l(e.$message),1))),128))])]),d("div",G,[d("div",H,[m(d("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.form.country=e),class:"form-control",placeholder:s.$t("select_country"),onChange:t[5]||(t[5]=(...e)=>i.countryChanged&&i.countryChanged(...e))},[t[13]||(t[13]=d("option",{value:"",disabled:""},"Select a Country",-1)),(o(!0),a(r,null,n(s.countries,e=>(o(),a("option",{key:e.id,value:e.id},l(e.name),9,J))),128))],40,I),[[g,s.form.country]]),(o(!0),a(r,null,n(s.v$.form.country.$errors,e=>(o(),a("p",{key:e.$uid,class:"text-red"},l(e.$message),1))),128))])]),d("div",Q,[d("div",R,[m(d("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>s.form.state=e),class:"form-control",placeholder:i.statePlaceholer,onChange:t[7]||(t[7]=(...e)=>i.stateChanged&&i.stateChanged(...e))},[t[14]||(t[14]=d("option",{value:"",disabled:""},"Select a State",-1)),(o(!0),a(r,null,n(s.filteredStates,e=>(o(),a("option",{key:e.id,value:e.id},l(e.name),9,X))),128))],40,W),[[g,s.form.state]]),(o(!0),a(r,null,n(s.v$.form.state.$errors,e=>(o(),a("p",{key:e.$uid,class:"text-red"},l(e.$message),1))),128))])]),d("div",Z,[d("div",x,[m(d("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>s.form.city=e),class:"form-control",placeholder:i.cityPlaceholer,onChange:t[9]||(t[9]=(...e)=>s.handleCityChange&&s.handleCityChange(...e))},[t[15]||(t[15]=d("option",{value:"",disabled:""},"Select a City",-1)),(o(!0),a(r,null,n(s.filteredCities,e=>(o(),a("option",{key:e.id,value:e.id},l(e.name),9,se))),128))],40,ee),[[g,s.form.city]]),(o(!0),a(r,null,n(s.v$.form.city.$errors,e=>(o(),a("p",{key:e.$uid,class:"text-red"},l(e.$message),1))),128))])]),d("div",te,[d("div",de,[m(d("input",{placeholder:s.$t("postal_code"),type:"text","onUpdate:modelValue":t[10]||(t[10]=e=>s.form.postal_code=e),"hide-details":"auto",required:"",class:"form-control"},null,8,oe),[[c,s.form.postal_code]]),(o(!0),a(r,null,n(s.v$.form.postal_code.$errors,e=>(o(),a("p",{key:e.$uid,class:"text-red"},l(e.$message),1))),128))])])]),d("div",ae,[s.is_empty_obj(h.oldAddress)?(o(),$(_,{key:1,elevation:"0",type:"submit",color:"primary",onClick:i.addNewAddress,loading:s.adding,disabled:s.adding},{default:p(()=>[C(l(s.$t("add_new")),1)]),_:1},8,["onClick","loading","disabled"])):(o(),$(_,{key:0,elevation:"0",type:"submit",color:"primary",onClick:i.updateAddress,loading:s.adding,disabled:s.adding},{default:p(()=>[C(l(s.$t("update")),1)]),_:1},8,["onClick","loading","disabled"]))])]),_:1},8,["modelValue","onClick:outside"])])}const re=V(U,[["render",ie]]);export{re as A};
