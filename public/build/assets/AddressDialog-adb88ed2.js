import{u as U,a as u,b as A,d as q,_ as D,f as c,o as l,v as V,w as g,i as a,h as m,y as h,K as p,g as d,k as r,t as o,F as n,p as S,l as F,j as N}from"./app-45d8c678.js";const P={props:{show:{type:Boolean,required:!0,default:!1},oldAddress:{type:Object,default:()=>{}}},data:()=>({adding:!1,countriesLoaded:!1,countries:[],filteredStates:[],filteredCities:[],v$:U(),form:{id:null,full_name:"",email_address:"",address:"",postal_code:"",country:"",state:"",city:"",phone:""}}),validations:{form:{full_name:{required:u},email_address:{required:u},address:{required:u},postal_code:{required:u},country:{required:u},state:{required:u},city:{required:u},phone:{required:u}}},watch:{oldAddress(e,t){e&&!this.is_empty_obj(e)?this.processOldAddress(e):this.resetData()}},computed:{statePlaceholer(){return this.$i18n.t("select_a_state")},cityPlaceholer(){return this.$i18n.t("select_a_city")},isVisible:{get:function(){return this.show},set:function(e){}}},created(){this.fetchCountries()},methods:{...A("address",["addAddress"]),...q("address",["setAddresses"]),async fetchCountries(){if(!this.countriesLoaded){const e=await this.call_api("get","all-countries");e.data.success&&(this.countriesLoaded=!0,this.countries=e.data.data)}},async countryChanged(e){const t=await this.call_api("get",`states/${this.form.country}`);t.data.success?(this.filteredStates=t.data.data,this.form.state="",this.form.city="",this.filteredCities=[]):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"})},async stateChanged(e){const t=await this.call_api("get",`cities/${this.form.state}`);t.data.success?(this.filteredCities=t.data.data,this.form.city=""):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"})},async addNewAddress(){if(!await this.v$.$validate())return;this.adding=!0;const t=await this.call_api("post","address/create",this.form);t.data.success?(this.addAddress(t.data.data),this.snack({message:t.data.message}),this.resetData(),this.closeDialog()):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"}),this.adding=!1},async updateAddress(){if(!await this.v$.$validate())return;this.adding=!0;const t=await this.call_api("post","address/update",this.form);t.data.success?(this.setAddresses(t.data.data),this.snack({message:t.data.message}),this.closeDialog()):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"}),this.adding=!1},resetData(){this.form.id=null,this.full_name="",this.email_address="",this.form.address="",this.form.postal_code="",this.form.country="",this.form.state="",this.form.city="",this.form.phone="",this.v$.form.$reset()},async processOldAddress(e){let t={...e};this.form.id=t.id,this.full_name=t.full_name,this.email_address=t.email_address,this.form.address=t.address,this.form.postal_code=t.postal_code,this.form.phone=t.phone;let v=this.countries.find(i=>i.name===t.country);this.form.country=v.id,await this.countryChanged(v.id);let y=this.filteredStates.find(i=>i.name===t.state);this.form.state=y.id,await this.stateChanged(y.id);let _=this.filteredCities.find(i=>i.name===t.city);this.form.city=_.id},closeDialog(){this.isVisible=!1,this.$emit("close")}}},B={class:"white pa-5 rounded"},j={class:"row"},L={class:"col-md-4"},M={class:"form-group"},O=["placeholder"],z={class:"col-md-4"},T={class:"form-group"},E=["placeholder"],K={class:"col-md-4"},G={class:"form-group"},H=["placeholder"],I={class:"col-md-4"},J={class:"form-group"},Q=["label"],R={class:"col-md-4"},W={class:"form-group"},X={class:"col-md-4"},Y={class:"form-group"},Z={class:"col-md-4"},x={class:"form-group"},ee={class:"col-md-4"},se={class:"form-group"},te=["placeholder"],ae={class:"mb-3"},le={class:"mb-1 fs-13 fw-500"},de={class:"mb-3"},oe={class:"mb-1 fs-13 fw-500"},ie={class:"mb-3"},re={class:"mb-1 fs-13 fw-500"},ne={class:"mb-3"},me={class:"mb-1 fs-13 fw-500"},ue={class:"mb-3"},fe={class:"mb-1 fs-13 fw-500"},ce={class:"mb-3"},he={class:"mb-1 fs-13 fw-500"},pe={class:"mb-3"},ve={class:"mb-3"},$e={class:"mb-1 fs-13 fw-500"},ye={class:"text-right mt-4"};function ge(e,t,v,y,_,i){const f=c("v-autocomplete"),$=c("v-text-field"),b=c("v-textarea"),w=c("v-btn"),C=c("v-form"),k=c("v-dialog");return l(),V(k,{modelValue:i.isVisible,"onUpdate:modelValue":t[17]||(t[17]=s=>i.isVisible=s),"max-width":"600px","onClick:outside":i.closeDialog},{default:g(()=>[a("div",B,[m(C,{onSubmit:t[16]||(t[16]=N(s=>i.addNewAddress(),["prevent"])),autocomplete:"chrome-off"},{default:g(()=>[a("div",j,[a("div",L,[a("div",M,[h(a("input",{placeholder:e.$t("email_address"),type:"email","onUpdate:modelValue":t[0]||(t[0]=s=>e.form.email_address=s),"hide-details":"auto",required:"",class:"form-control"},null,8,O),[[p,e.form.email_address]]),(l(!0),d(n,null,r(e.v$.form.email_address.$errors,s=>(l(),d("p",{key:s.$uid,class:"text-red"},o(s.$message),1))),128))])]),a("div",z,[a("div",T,[h(a("input",{placeholder:e.$t("full_name"),type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>e.form.full_name=s),"hide-details":"auto",required:"",class:"form-control"},null,8,E),[[p,e.form.full_name]]),(l(!0),d(n,null,r(e.v$.form.full_name.$errors,s=>(l(),d("p",{key:s.$uid,class:"text-red"},o(s.$message),1))),128))])]),a("div",K,[a("div",G,[h(a("input",{placeholder:e.$t("phone_number"),type:"number","onUpdate:modelValue":t[2]||(t[2]=s=>e.form.phone=s),"hide-details":"auto",required:"",class:"form-control"},null,8,H),[[p,e.form.phone]]),(l(!0),d(n,null,r(e.v$.form.phone.$errors,s=>(l(),d("p",{key:s.$uid,class:"text-red"},o(s.$message),1))),128))])]),a("div",I,[a("div",J,[h(a("textarea",{label:e.$t("address"),"onUpdate:modelValue":t[3]||(t[3]=s=>e.form.address=s),"hide-details":"auto",rows:"3",required:"","no-resize":"",class:"form-control"},null,8,Q),[[p,e.form.address]]),(l(!0),d(n,null,r(e.v$.form.address.$errors,s=>(l(),d("p",{key:s.$uid,class:"text-red"},o(s.$message),1))),128))])]),a("div",R,[a("div",W,[m(f,{modelValue:e.form.country,"onUpdate:modelValue":[t[4]||(t[4]=s=>e.form.country=s),i.countryChanged],items:e.countries,label:e.$t("select_country"),"hide-details":"auto","item-title":"name","item-value":"id",dense:"",autocomplete:"off","custom-filter":i.countryChanged,class:"form-control"},null,8,["modelValue","items","label","custom-filter","onUpdate:modelValue"]),(l(!0),d(n,null,r(e.v$.form.country.$errors,s=>(l(),d("p",{key:s.$uid,class:"text-red"},o(s.$message),1))),128))])]),a("div",X,[a("div",Y,[m(f,{modelValue:e.form.state,"onUpdate:modelValue":[t[5]||(t[5]=s=>e.form.state=s),i.stateChanged],items:e.filteredStates,"hide-details":"auto",label:i.statePlaceholer,class:"form-control","item-title":"name","item-value":"id",dense:""},null,8,["modelValue","items","label","onUpdate:modelValue"]),(l(!0),d(n,null,r(e.v$.form.state.$errors,s=>(l(),d("p",{key:s.$uid,class:"text-red"},o(s.$message),1))),128))])]),a("div",Z,[a("div",x,[m(f,{modelValue:e.form.city,"onUpdate:modelValue":t[6]||(t[6]=s=>e.form.city=s),items:e.filteredCities,label:i.cityPlaceholer,"hide-details":"auto",class:"form-control","item-title":"name","item-value":"id",dense:""},null,8,["modelValue","items","label"]),(l(!0),d(n,null,r(e.v$.form.city.$errors,s=>(l(),d("p",{key:s.$uid,class:"text-red"},o(s.$message),1))),128))])]),a("div",ee,[a("div",se,[h(a("input",{placeholder:e.$t("postal_code"),type:"text","onUpdate:modelValue":t[7]||(t[7]=s=>e.form.postal_code=s),"hide-details":"auto",required:"",class:"form-control"},null,8,te),[[p,e.form.postal_code]]),(l(!0),d(n,null,r(e.v$.form.postal_code.$errors,s=>(l(),d("p",{key:s.$uid,class:"text-red"},o(s.$message),1))),128))])])]),a("div",ae,[a("div",le,o(e.$t("full_name")),1),m($,{placeholder:e.$t("full_name"),type:"text",modelValue:e.form.full_name,"onUpdate:modelValue":t[8]||(t[8]=s=>e.form.full_name=s),"hide-details":"auto",required:"",variant:"outlined"},null,8,["placeholder","modelValue"]),(l(!0),d(n,null,r(e.v$.form.full_name.$errors,s=>(l(),d("p",{key:s.$uid,class:"text-red"},o(s.$message),1))),128))]),a("div",de,[a("div",oe,o(e.$t("email_address")),1),m($,{placeholder:e.$t("email_address"),type:"email",modelValue:e.form.email_address,"onUpdate:modelValue":t[9]||(t[9]=s=>e.form.email_address=s),"hide-details":"auto",required:"",variant:"outlined"},null,8,["placeholder","modelValue"]),(l(!0),d(n,null,r(e.v$.form.email_address.$errors,s=>(l(),d("p",{key:s.$uid,class:"text-red"},o(s.$message),1))),128))]),a("div",ie,[a("div",re,o(e.$t("address")),1),m(b,{label:e.$t("address"),modelValue:e.form.address,"onUpdate:modelValue":t[10]||(t[10]=s=>e.form.address=s),"hide-details":"auto",rows:"3",required:"",variant:"outlined","no-resize":""},null,8,["label","modelValue"]),(l(!0),d(n,null,r(e.v$.form.address.$errors,s=>(l(),d("p",{key:s.$uid,class:"text-red"},o(s.$message),1))),128))]),a("div",ne,[a("div",me,o(e.$t("postal_code")),1),m($,{placeholder:e.$t("postal_code"),type:"text",modelValue:e.form.postal_code,"onUpdate:modelValue":t[11]||(t[11]=s=>e.form.postal_code=s),"hide-details":"auto",required:"",variant:"outlined"},null,8,["placeholder","modelValue"]),(l(!0),d(n,null,r(e.v$.form.postal_code.$errors,s=>(l(),d("p",{key:s.$uid,class:"text-red"},o(s.$message),1))),128))]),a("div",ue,[a("div",fe,o(e.$t("country")),1),m(f,{modelValue:e.form.country,"onUpdate:modelValue":[t[12]||(t[12]=s=>e.form.country=s),i.countryChanged],items:e.countries,label:e.$t("select_country"),"hide-details":"auto",variant:"outlined","item-title":"name","item-value":"id",dense:"",autocomplete:"off","custom-filter":i.countryChanged},null,8,["modelValue","items","label","custom-filter","onUpdate:modelValue"]),(l(!0),d(n,null,r(e.v$.form.country.$errors,s=>(l(),d("p",{key:s.$uid,class:"text-red"},o(s.$message),1))),128))]),a("div",ce,[a("div",he,o(e.$t("state")),1),m(f,{modelValue:e.form.state,"onUpdate:modelValue":[t[13]||(t[13]=s=>e.form.state=s),i.stateChanged],items:e.filteredStates,"hide-details":"auto",label:i.statePlaceholer,variant:"outlined","item-title":"name","item-value":"id",dense:""},null,8,["modelValue","items","label","onUpdate:modelValue"]),(l(!0),d(n,null,r(e.v$.form.state.$errors,s=>(l(),d("p",{key:s.$uid,class:"text-red"},o(s.$message),1))),128))]),a("div",pe,[t[18]||(t[18]=a("div",{class:"mb-1 fs-13 fw-500"},"City",-1)),m(f,{modelValue:e.form.city,"onUpdate:modelValue":t[14]||(t[14]=s=>e.form.city=s),items:e.filteredCities,label:i.cityPlaceholer,"hide-details":"auto",variant:"outlined","item-title":"name","item-value":"id",dense:""},null,8,["modelValue","items","label"]),(l(!0),d(n,null,r(e.v$.form.city.$errors,s=>(l(),d("p",{key:s.$uid,class:"text-red"},o(s.$message),1))),128))]),a("div",ve,[a("div",$e,o(e.$t("phone_number")),1),m($,{placeholder:e.$t("phone_number"),type:"number",modelValue:e.form.phone,"onUpdate:modelValue":t[15]||(t[15]=s=>e.form.phone=s),"hide-details":"auto",required:"",variant:"outlined"},null,8,["placeholder","modelValue"]),(l(!0),d(n,null,r(e.v$.form.phone.$errors,s=>(l(),d("p",{key:s.$uid,class:"text-red"},o(s.$message),1))),128))]),a("div",ye,[e.is_empty_obj(v.oldAddress)?F("",!0):(l(),V(w,{key:0,elevation:"0",type:"submit",color:"primary",onClick:i.updateAddress,loading:e.adding,disabled:e.adding},{default:g(()=>[S(o(e.$t("update")),1)]),_:1},8,["onClick","loading","disabled"]))])]),_:1})])]),_:1},8,["modelValue","onClick:outside"])}const Ve=D(P,[["render",ge]]);export{Ve as A};
