import{u as w,a as u,b as k,d as b,_ as A,f as v,o as a,g as d,k as l,h as V,w as y,i as o,y as m,K as c,F as n,t as r,bY as g,v as S,p as D,l as U,j as q}from"./app-80c77732.js";const F={props:{show:{type:Boolean,required:!0,default:!1},oldAddress:{type:Object,default:()=>{}}},data:()=>({adding:!1,countriesLoaded:!1,countries:[],filteredStates:[],filteredCities:[],v$:w(),form:{id:null,full_name:"",email_address:"",address:"",postal_code:"",country:"",state:"",city:"",phone:""}}),validations:{form:{full_name:{required:u},email_address:{required:u},address:{required:u},postal_code:{required:u},country:{required:u},state:{required:u},city:{required:u},phone:{required:u}}},watch:{oldAddress(s,t){s&&!this.is_empty_obj(s)?this.processOldAddress(s):this.resetData()}},computed:{statePlaceholer(){return this.$i18n.t("select_a_state")},cityPlaceholer(){return this.$i18n.t("select_a_city")},isVisible:{get:function(){return this.show},set:function(s){}}},created(){this.fetchCountries()},methods:{...k("address",["addAddress"]),...b("address",["setAddresses"]),async fetchCountries(){if(!this.countriesLoaded){const s=await this.call_api("get","all-countries");s.data.success&&(this.countriesLoaded=!0,this.countries=s.data.data)}},async countryChanged(s){const t=await this.call_api("get",`states/${this.form.country}`);t.data.success?(this.filteredStates=t.data.data,this.form.state="",this.form.city="",this.filteredCities=[]):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"})},async stateChanged(s){const t=await this.call_api("get",`cities/${this.form.state}`);t.data.success?(this.filteredCities=t.data.data,this.form.city=""):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"})},async addNewAddress(){if(!await this.v$.$validate())return;this.adding=!0;const t=await this.call_api("post","address/create",this.form);t.data.success?(this.addAddress(t.data.data),this.snack({message:t.data.message}),this.resetData(),this.closeDialog()):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"}),this.adding=!1},async updateAddress(){if(!await this.v$.$validate())return;this.adding=!0;const t=await this.call_api("post","address/update",this.form);t.data.success?(this.setAddresses(t.data.data),this.snack({message:t.data.message}),this.closeDialog()):this.snack({message:this.$i18n.t("something_went_wrong"),color:"red"}),this.adding=!1},resetData(){this.form.id=null,this.full_name="",this.email_address="",this.form.address="",this.form.postal_code="",this.form.country="",this.form.state="",this.form.city="",this.form.phone="",this.v$.form.$reset()},async processOldAddress(s){let t={...s};this.form.id=t.id,this.full_name=t.full_name,this.email_address=t.email_address,this.form.address=t.address,this.form.postal_code=t.postal_code,this.form.phone=t.phone;let h=this.countries.find(i=>i.name===t.country);this.form.country=h.id,await this.countryChanged(h.id);let p=this.filteredStates.find(i=>i.name===t.state);this.form.state=p.id,await this.stateChanged(p.id);let _=this.filteredCities.find(i=>i.name===t.city);this.form.city=_.id},closeDialog(){this.isVisible=!1,this.$emit("close")}}},N={class:"white pa-5 rounded"},B={class:"row"},j={class:"col-md-4"},L={class:"form-group"},M=["placeholder","value"],P={class:"col-md-4"},O={class:"form-group"},T=["placeholder","value"],z={class:"col-md-4"},E={class:"form-group"},K=["placeholder"],Y={class:"col-md-4"},G={class:"form-group"},H=["label","placeholder","onUpdate:modelValue"],I={class:"col-md-4"},J={class:"form-group"},Q=["placeholder"],R=["value"],W={class:"col-md-4"},X={class:"form-group"},Z=["placeholder"],x=["value"],ee={class:"col-md-4"},se={class:"form-group"},te=["placeholder"],oe=["value"],ae={class:"col-md-4"},de={class:"form-group"},ie=["placeholder","value"],re={class:"text-right mt-4"};function le(s,t,h,p,_,i){const $=v("v-btn"),C=v("v-form");return a(!0),d(n,null,l(s.getAddresses,f=>(a(),d("div",N,[V(C,{onSubmit:t[10]||(t[10]=q(e=>i.addNewAddress(),["prevent"])),autocomplete:"chrome-off"},{default:y(()=>[o("div",B,[o("div",j,[o("div",L,[m(o("input",{placeholder:s.$t("email_address"),type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>s.form.email_address=e),"hide-details":"auto",required:"",class:"form-control",value:f.email},null,8,M),[[c,s.form.email_address]]),(a(!0),d(n,null,l(s.v$.form.email_address.$errors,e=>(a(),d("p",{key:e.$uid,class:"text-red"},r(e.$message),1))),128))])]),o("div",P,[o("div",O,[m(o("input",{placeholder:s.$t("full_name"),type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.form.full_name=e),"hide-details":"auto",required:"",class:"form-control",value:f.full_name},null,8,T),[[c,s.form.full_name]]),(a(!0),d(n,null,l(s.v$.form.full_name.$errors,e=>(a(),d("p",{key:e.$uid,class:"text-red"},r(e.$message),1))),128))])]),o("div",z,[o("div",E,[m(o("input",{placeholder:s.$t("phone_number"),type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>s.form.phone=e),"hide-details":"auto",required:"",class:"form-control"},null,8,K),[[c,s.form.phone]]),(a(!0),d(n,null,l(s.v$.form.phone.$errors,e=>(a(),d("p",{key:e.$uid,class:"text-red"},r(e.$message),1))),128))])]),o("div",Y,[o("div",G,[m(o("textarea",{label:s.$t("address"),placeholder:s.$t("Street Address"),"onUpdate:modelValue":e=>s.form.address=e,"hide-details":"auto",rows:"1",required:"","no-resize":"",class:"form-control"},r(f.address),9,H),[[c,s.form.address]]),(a(!0),d(n,null,l(s.v$.form.address.$errors,e=>(a(),d("p",{key:e.$uid,class:"text-red"},r(e.$message),1))),128))])]),o("div",I,[o("div",J,[m(o("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.form.country=e),class:"form-control",placeholder:s.$t("select_country"),onChange:t[4]||(t[4]=(...e)=>i.countryChanged&&i.countryChanged(...e))},[t[11]||(t[11]=o("option",{value:"",disabled:""},"Select a Country",-1)),(a(!0),d(n,null,l(s.countries,e=>(a(),d("option",{key:e.id,value:e.id},r(e.name),9,R))),128))],40,Q),[[g,s.form.country]]),(a(!0),d(n,null,l(s.v$.form.country.$errors,e=>(a(),d("p",{key:e.$uid,class:"text-red"},r(e.$message),1))),128))])]),o("div",W,[o("div",X,[m(o("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.form.state=e),class:"form-control",placeholder:i.statePlaceholer,onChange:t[6]||(t[6]=(...e)=>i.stateChanged&&i.stateChanged(...e))},[t[12]||(t[12]=o("option",{value:"",disabled:""},"Select a State",-1)),(a(!0),d(n,null,l(s.filteredStates,e=>(a(),d("option",{key:e.id,value:e.id},r(e.name),9,x))),128))],40,Z),[[g,s.form.state]]),(a(!0),d(n,null,l(s.v$.form.state.$errors,e=>(a(),d("p",{key:e.$uid,class:"text-red"},r(e.$message),1))),128))])]),o("div",ee,[o("div",se,[m(o("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>s.form.city=e),class:"form-control",placeholder:i.cityPlaceholer,onChange:t[8]||(t[8]=(...e)=>s.handleCityChange&&s.handleCityChange(...e))},[t[13]||(t[13]=o("option",{value:"",disabled:""},"Select a City",-1)),(a(!0),d(n,null,l(s.filteredCities,e=>(a(),d("option",{key:e.id,value:e.id},r(e.name),9,oe))),128))],40,te),[[g,s.form.city]]),(a(!0),d(n,null,l(s.v$.form.city.$errors,e=>(a(),d("p",{key:e.$uid,class:"text-red"},r(e.$message),1))),128))])]),o("div",ae,[o("div",de,[m(o("input",{placeholder:s.$t("postal_code"),type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>s.form.postal_code=e),"hide-details":"auto",value:f.postal_code,required:"",class:"form-control"},null,8,ie),[[c,s.form.postal_code]]),(a(!0),d(n,null,l(s.v$.form.postal_code.$errors,e=>(a(),d("p",{key:e.$uid,class:"text-red"},r(e.$message),1))),128))])])]),o("div",re,[s.is_empty_obj(h.oldAddress)?U("",!0):(a(),S($,{key:0,elevation:"0",type:"submit",color:"primary",onClick:i.updateAddress,loading:s.adding,disabled:s.adding},{default:y(()=>[D(r(s.$t("update")),1)]),_:1},8,["onClick","loading","disabled"]))])]),_:2},1024)]))),256)}const ue=A(F,[["render",le]]);export{ue as A};
